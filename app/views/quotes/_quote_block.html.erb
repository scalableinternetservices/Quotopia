<script type="text/javascript" src="home.js"></script>

<% @quotes.each do |quote| %>
    <div class="quote row">
        <div class="col-xs-2 vote vote-<%=quote.id%>">
            <% if user_signed_in? %>
                <%= render partial: "votes/quote_vote", locals: {quote: quote, current_user_id: current_user.id} %>
            <% else %>
                <span class="fa fa-2x fa-chevron-up gray" aria-hidden="true"></span>
                <h4 class="vote-count"><%= Vote.quote_count(quote.id) %> </h4>
                <span class="fa fa-2x fa-chevron-down gray" aria-hidden="true"></span>
            <% end %>
        </div>
        <div class="col-xs-8 quote-text panel panel-default center" id="quote-panel">
            <script type="text/javascript">
                function showMoreOrLess( elem ) {
                    var link=elem;
            
                    do {
                        elem = elem.previousSibling;
                    } while ( elem && elem.nodeType !== 1);

                    if(link.innerHTML == "Show More"){
                        elem.style.maxHeight="none";
                        link.innerHTML="See Less";
                    } else {
                        elem.style.maxHeight="58px";
                        link.innerHTML="Show More";
                    }
                }

                function ifOverflow(elem){ //NOT WORKING
                    if(elem.scrollHeight > elem.clientHeight || elem.scrollWidth > elem.clientWidth) {
                        elem.style.backgroundColor="#009900";
                        //elem.append('<a class="see-more" onclick="showMoreOrLess(this);" style="float:right;">Show More</a>');
                    } else{
                         do {
                            elem = elem.nextSibling;
                        } while (elem && elem.nodeType !== 1);
                        elem.style.display = 'none';
                    }
                }
            </script>
            <div class="panel-body" id="quote-content"><%= quote.content %></div>
            <!--<script type="text/javascript">ifOverflow(this)</script>-->
            <a class="see-more" onclick="showMoreOrLess(this);" style="float:right;">Show More</a>
            <!--<a href="#" onclick="this.previousSibling.style.maxHeight='none';">See more</a>-->

        </div>
        <div class="col-xs-2 center quote-buttons">
            <div class="btn-group ">
                <button type="button" class="btn btn-default">
                    <span class="fa fa-lg fa-heart-o" aria-hidden="true"></span>
                </button>
                <button type="button" class="btn btn-default">
                    <span class="fa fa-lg fa-comment" aria-hidden="true"></span>
                </button>
            </div>
        </div>
    </div>

<% end %>

<!--
    <div class="quote row">
        <div class="col-xs-1 quote-favorite panel panel-default">
            <div class="panel-body">
                <a href="#">
                    <span class="fa fa-lg fa-heart-o" aria-hidden="true"></span>
                </a>
            </div>
        </div>
        <div class="col-xs-1 quote-comments panel panel-default">
            <div class="panel-body">
                <a href="#">
                    <span class="fa fa-lg fa-comment" aria-hidden="true"></span>
                </a>
            </div>
        </div>
    </div>
-->
